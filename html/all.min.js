!function(){"use strict";angular.module("myApp",["ionic","authentication","demo"])}(),function(){"use strict";angular.module("authentication",[]),angular.module("authentication").value("user",{username:"",password:""}).value("successURL","/").value("failURL","#");var t=function(t){t.state("login",{url:"/login",templateUrl:"partials/authentication/login.html",controller:"authenticationController"})};t.$inject=["$stateProvider"],angular.module("authentication").config(t).run(["$rootScope","$location","user","$http",function(t,e,n,o){n=JSON.parse(localStorage.getItem("user"))||n,n.authdata&&(o.defaults.headers.common.Authorization="Bearer "+n.authdata),t.$on("$locationChangeStart",function(){"/login"===e.path()||n.authdata||e.path("/login")})}])}(),function(){"use strict";var t=function(t,e,n,o){t.user=o,t.login=function(){n.login().then(function(t){console.log(t),e.path(t)},function(){alert("error")})},t.signUp=function(){},t.logout=function(){}};t.$inject=["$scope","$location","authenticationFactory","user"],angular.module("authentication").controller("authenticationController",t)}(),function(){"use strict";var t=function(t,e,n,o,i){function a(){var t=e.defer();if(""!=o.username&&""!=o.password){var n={token:"blahblah",profile:{name:"test user",email:"test@email.com"}};l(n),t.resolve(i)}else t.reject();return t.promise}function l(t){console.log("Login Sucess"),delete o.password,o.profile=t.profile,o.authdata=t.token,localStorage.setItem("user",JSON.stringify(o))}function s(){localStorage.clear(),delete o.authdata,n.path("/login")}return{login:a,logout:s}};t.$inject=["$http","$q","$location","user","successURL"];var e=function(t,e){return{response:function(e){return 401===e.status&&console.log("Response 401"),e||t.when(e)},responseError:function(n){return 401===n.status&&(console.log("Response Error 401",n),e.path("/login").search("returnTo",e.path())),t.reject(n)}}};e.$inject=["$q","$location"],angular.module("authentication").factory("authenticationFactory",t).factory("httpAuthInterceptor",e).config(["$httpProvider",function(t){t.interceptors.push("httpAuthInterceptor")}])}(),angular.module("demo",["ionic","demo.controllers"]).run(["$ionicPlatform",function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("app",{url:"/app","abstract":!0,templateUrl:"partials/demo/menu.html",controller:"AppCtrl"}).state("app.search",{url:"/search",views:{menuContent:{templateUrl:"partials/demo/search.html"}}}).state("app.browse",{url:"/browse",views:{menuContent:{templateUrl:"partials/demo/browse.html"}}}).state("app.playlists",{url:"/playlists",views:{menuContent:{templateUrl:"partials/demo/playlists.html",controller:"PlaylistsCtrl"}}}).state("app.single",{url:"/playlists/:playlistId",views:{menuContent:{templateUrl:"partials/demo/playlist.html",controller:"PlaylistCtrl"}}}),e.otherwise("/app/playlists")}]),angular.module("demo.controllers",[]).controller("AppCtrl",["$scope","$ionicModal","$timeout",function(t,e,n){t.loginData={},e.fromTemplateUrl("partials/demo/login.html",{scope:t}).then(function(e){t.modal=e}),t.closeLogin=function(){t.modal.hide()},t.login=function(){t.modal.show()},t.doLogin=function(){console.log("Doing login",t.loginData),n(function(){t.closeLogin()},1e3)}}]).controller("PlaylistsCtrl",["$scope",function(t){t.playlists=[{title:"Reggae",id:1},{title:"Chill",id:2},{title:"Dubstep",id:3},{title:"Indie",id:4},{title:"Rap",id:5},{title:"Cowbell",id:6}]}]).controller("PlaylistCtrl",["$scope","$stateParams",function(){}]),angular.module("myApp").run(["$templateCache",function(t){t.put("partials/authentication/login.html","<ion-view view-title=Login><ion-content><label>username</label> <input type=text ng-model=user.username> <label>password</label> <input type=text ng-model=user.password> <button ng-click=login()>Log in</button></ion-content></ion-view>"),t.put("partials/demo/browse.html","<ion-view view-title=Browse><ion-content><h1>Browse</h1></ion-content></ion-view>"),t.put("partials/demo/login.html",'<ion-modal-view><ion-header-bar><h1 class=title>Login</h1><div class=buttons><button class="button button-clear" ng-click=closeLogin()>Close</button></div></ion-header-bar><ion-content><form ng-submit=doLogin()><div class=list><label class="item item-input"><span class=input-label>Username</span> <input type=text ng-model=loginData.username></label> <label class="item item-input"><span class=input-label>Password</span> <input type=password ng-model=loginData.password></label> <label class=item><button class="button button-block button-positive" type=submit>Log in</button></label></div></form></ion-content></ion-modal-view>'),t.put("partials/demo/menu.html",'<ion-side-menus enable-menu-with-back-views=false><ion-side-menu-content><ion-nav-bar class=bar-stable><ion-nav-back-button></ion-nav-back-button><ion-nav-buttons side=left><button class="button button-icon button-clear ion-navicon" menu-toggle=left></button></ion-nav-buttons></ion-nav-bar><ion-nav-view name=menuContent></ion-nav-view></ion-side-menu-content><ion-side-menu side=left><ion-header-bar class=bar-stable><h1 class=title>Left</h1></ion-header-bar><ion-content><ion-list><ion-item nav-clear="" menu-close="" ng-click=login()>Login</ion-item><ion-item nav-clear="" menu-close="" href=#/app/search>Search</ion-item><ion-item nav-clear="" menu-close="" href=#/app/browse>Browse</ion-item><ion-item nav-clear="" menu-close="" href=#/app/playlists>Playlists</ion-item></ion-list></ion-content></ion-side-menu></ion-side-menus>'),t.put("partials/demo/playlist.html","<ion-view view-title=Playlist><ion-content><h1>Playlist</h1><p>This rocks</p></ion-content></ion-view>"),t.put("partials/demo/playlists.html",'<ion-view view-title=Playlists><ion-content><ion-list><ion-item ng-repeat="playlist in playlists" href=#/app/playlists/{{playlist.id}}>{{playlist.title}}</ion-item></ion-list></ion-content></ion-view>'),t.put("partials/demo/search.html","<ion-view view-title=Search><ion-content><h1>Search</h1></ion-content></ion-view>")}]);